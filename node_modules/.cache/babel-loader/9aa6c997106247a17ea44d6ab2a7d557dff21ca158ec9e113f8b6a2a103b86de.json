{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{userRequest}from'../requestMethod';import{resetCustomerCart}from'../redux/apiCalls';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PayCash(){const cart=useSelector(state=>state.cart);const[orderId,setOrderId]=useState(null);const currentCustomer=useSelector(state=>state.customer.currentCustomer);const dispatch=useDispatch();useEffect(()=>{const createOrder=async()=>{try{const res=await userRequest.post(\"/orders\",{userId:currentCustomer._id,phone:currentCustomer.phone,products:cart.products.map(item=>({productId:item._id,title:item.title,img:item.img,price:item.price,size:item.selectedSize,color:item.selectedColor,quantity:item._quantity})),amount:cart.total*100,address:'none',payment:'cash',paymentStatus:'pending'});setOrderId(res.data._id);}catch{}};createOrder();resetCustomerCart(dispatch);},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{height:\"100vh\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\"},children:[orderId?\"Order has been created successfully. Your order number is \".concat(orderId):\"Successfull. Your order is being prepared...\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>{window.location.href='/';},style:{padding:10,marginTop:20},children:\"Continue Shopping\"})]});}export default PayCash;","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","userRequest","resetCustomerCart","jsx","_jsx","jsxs","_jsxs","PayCash","cart","state","orderId","setOrderId","currentCustomer","customer","dispatch","createOrder","res","post","userId","_id","phone","products","map","item","productId","title","img","price","size","selectedSize","color","selectedColor","quantity","_quantity","amount","total","address","payment","paymentStatus","data","style","height","display","flexDirection","alignItems","justifyContent","children","concat","onClick","window","location","href","padding","marginTop"],"sources":["C:/Users/Abdu/OneDrive/Desktop/React/my-ecommerce/src/pages/PayCash.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { userRequest } from '../requestMethod';\r\nimport { resetCustomerCart } from '../redux/apiCalls';\r\nfunction PayCash() {\r\n  \r\n  const cart = useSelector((state)=>state.cart);\r\n  const [orderId, setOrderId] = useState(null);\r\n  const currentCustomer = useSelector((state) => state.customer.currentCustomer);\r\n  const dispatch = useDispatch();\r\n  \r\n    useEffect(()=>{\r\n    const createOrder = async () => {\r\n      try {\r\n        const res = await userRequest.post(\"/orders\", {\r\n          userId: currentCustomer._id,\r\n          phone: currentCustomer.phone,\r\n          products: cart.products.map((item) => ({\r\n            productId: item._id,\r\n            title: item.title,\r\n            img: item.img,\r\n            price:item.price,\r\n            size: item.selectedSize,\r\n            color: item.selectedColor,\r\n            quantity: item._quantity,\r\n          })),\r\n          amount: cart.total * 100,\r\n          address: 'none',\r\n          payment: 'cash',\r\n          paymentStatus: 'pending',\r\n          \r\n        });\r\n      \r\n        setOrderId(res.data._id);\r\n        \r\n      } catch {}\r\n    };\r\n\r\n  createOrder();\r\n  resetCustomerCart(dispatch);\r\n},[])\r\n \r\n  return (\r\n    <div\r\n      style={{\r\n        height: \"100vh\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n      }}\r\n    >\r\n      {orderId\r\n        ? `Order has been created successfully. Your order number is ${orderId}`\r\n        : `Successfull. Your order is being prepared...`}\r\n      <button onClick={()=>{window.location.href = '/'}} style={{ padding: 10, marginTop: 20 }}>Continue Shopping</button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PayCash\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,iBAAiB,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACtD,QAAS,CAAAC,OAAOA,CAAA,CAAG,CAEjB,KAAM,CAAAC,IAAI,CAAGR,WAAW,CAAES,KAAK,EAAGA,KAAK,CAACD,IAAI,CAAC,CAC7C,KAAM,CAACE,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAAc,eAAe,CAAGZ,WAAW,CAAES,KAAK,EAAKA,KAAK,CAACI,QAAQ,CAACD,eAAe,CAAC,CAC9E,KAAM,CAAAE,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAE5BF,SAAS,CAAC,IAAI,CACd,KAAM,CAAAkB,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAf,WAAW,CAACgB,IAAI,CAAC,SAAS,CAAE,CAC5CC,MAAM,CAAEN,eAAe,CAACO,GAAG,CAC3BC,KAAK,CAAER,eAAe,CAACQ,KAAK,CAC5BC,QAAQ,CAAEb,IAAI,CAACa,QAAQ,CAACC,GAAG,CAAEC,IAAI,GAAM,CACrCC,SAAS,CAAED,IAAI,CAACJ,GAAG,CACnBM,KAAK,CAAEF,IAAI,CAACE,KAAK,CACjBC,GAAG,CAAEH,IAAI,CAACG,GAAG,CACbC,KAAK,CAACJ,IAAI,CAACI,KAAK,CAChBC,IAAI,CAAEL,IAAI,CAACM,YAAY,CACvBC,KAAK,CAAEP,IAAI,CAACQ,aAAa,CACzBC,QAAQ,CAAET,IAAI,CAACU,SACjB,CAAC,CAAC,CAAC,CACHC,MAAM,CAAE1B,IAAI,CAAC2B,KAAK,CAAG,GAAG,CACxBC,OAAO,CAAE,MAAM,CACfC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,SAEjB,CAAC,CAAC,CAEF3B,UAAU,CAACK,GAAG,CAACuB,IAAI,CAACpB,GAAG,CAAC,CAE1B,CAAE,KAAM,CAAC,CACX,CAAC,CAEHJ,WAAW,CAAC,CAAC,CACbb,iBAAiB,CAACY,QAAQ,CAAC,CAC7B,CAAC,CAAC,EAAE,CAAC,CAEH,mBACER,KAAA,QACEkC,KAAK,CAAE,CACLC,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,MAAM,CACfC,aAAa,CAAE,QAAQ,CACvBC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAClB,CAAE,CAAAC,QAAA,EAEDpC,OAAO,8DAAAqC,MAAA,CACyDrC,OAAO,gDACtB,cAClDN,IAAA,WAAQ4C,OAAO,CAAEA,CAAA,GAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,EAAE,CAACX,KAAK,CAAE,CAAEY,OAAO,CAAE,EAAE,CAAEC,SAAS,CAAE,EAAG,CAAE,CAAAP,QAAA,CAAC,mBAAiB,CAAQ,CAAC,EACjH,CAAC,CAEV,CAEA,cAAe,CAAAvC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}